{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.alignVerticalRangeContent = exports.wrapRangeContent = void 0;\nconst string_width_1 = __importDefault(require(\"string-width\"));\nconst alignString_1 = require(\"./alignString\");\nconst mapDataUsingRowHeights_1 = require(\"./mapDataUsingRowHeights\");\nconst padTableData_1 = require(\"./padTableData\");\nconst truncateTableData_1 = require(\"./truncateTableData\");\nconst utils_1 = require(\"./utils\");\nconst wrapCell_1 = require(\"./wrapCell\");\n/**\n * Fill content into all cells in range in order to calculate total height\n */\nconst wrapRangeContent = (rangeConfig, rangeWidth, context) => {\n  const {\n    topLeft,\n    paddingRight,\n    paddingLeft,\n    truncate,\n    wrapWord,\n    alignment\n  } = rangeConfig;\n  const originalContent = context.rows[topLeft.row][topLeft.col];\n  const contentWidth = rangeWidth - paddingLeft - paddingRight;\n  return (0, wrapCell_1.wrapCell)((0, truncateTableData_1.truncateString)(originalContent, truncate), contentWidth, wrapWord).map(line => {\n    const alignedLine = (0, alignString_1.alignString)(line, contentWidth, alignment);\n    return (0, padTableData_1.padString)(alignedLine, paddingLeft, paddingRight);\n  });\n};\nexports.wrapRangeContent = wrapRangeContent;\nconst alignVerticalRangeContent = (range, content, context) => {\n  const {\n    rows,\n    drawHorizontalLine,\n    rowHeights\n  } = context;\n  const {\n    topLeft,\n    bottomRight,\n    verticalAlignment\n  } = range;\n  // They are empty before calculateRowHeights function run\n  if (rowHeights.length === 0) {\n    return [];\n  }\n  const totalCellHeight = (0, utils_1.sumArray)(rowHeights.slice(topLeft.row, bottomRight.row + 1));\n  const totalBorderHeight = bottomRight.row - topLeft.row;\n  const hiddenHorizontalBorderCount = (0, utils_1.sequence)(topLeft.row + 1, bottomRight.row).filter(horizontalBorderIndex => {\n    return !drawHorizontalLine(horizontalBorderIndex, rows.length);\n  }).length;\n  const availableRangeHeight = totalCellHeight + totalBorderHeight - hiddenHorizontalBorderCount;\n  return (0, mapDataUsingRowHeights_1.padCellVertically)(content, availableRangeHeight, verticalAlignment).map(line => {\n    if (line.length === 0) {\n      return ' '.repeat((0, string_width_1.default)(content[0]));\n    }\n    return line;\n  });\n};\nexports.alignVerticalRangeContent = alignVerticalRangeContent;","map":{"version":3,"names":["string_width_1","__importDefault","require","alignString_1","mapDataUsingRowHeights_1","padTableData_1","truncateTableData_1","utils_1","wrapCell_1","wrapRangeContent","rangeConfig","rangeWidth","context","topLeft","paddingRight","paddingLeft","truncate","wrapWord","alignment","originalContent","rows","row","col","contentWidth","wrapCell","truncateString","map","line","alignedLine","alignString","padString","exports","alignVerticalRangeContent","range","content","drawHorizontalLine","rowHeights","bottomRight","verticalAlignment","length","totalCellHeight","sumArray","slice","totalBorderHeight","hiddenHorizontalBorderCount","sequence","filter","horizontalBorderIndex","availableRangeHeight","padCellVertically","repeat","default"],"sources":["../../src/alignSpanningCell.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;AAAA,MAAAA,cAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,aAAA,GAAAD,OAAA;AAGA,MAAAE,wBAAA,GAAAF,OAAA;AAGA,MAAAG,cAAA,GAAAH,OAAA;AAMA,MAAAI,mBAAA,GAAAJ,OAAA;AAMA,MAAAK,OAAA,GAAAL,OAAA;AAGA,MAAAM,UAAA,GAAAN,OAAA;AAIA;;;AAGO,MAAMO,gBAAgB,GAAGA,CAACC,WAAwB,EAAEC,UAAkB,EAAEC,OAA4B,KAAc;EACvH,MAAM;IAACC,OAAO;IAAEC,YAAY;IAAEC,WAAW;IAAEC,QAAQ;IAAEC,QAAQ;IAAEC;EAAS,CAAC,GAAGR,WAAW;EAEvF,MAAMS,eAAe,GAAGP,OAAO,CAACQ,IAAI,CAACP,OAAO,CAACQ,GAAG,CAAC,CAACR,OAAO,CAACS,GAAG,CAAC;EAC9D,MAAMC,YAAY,GAAGZ,UAAU,GAAGI,WAAW,GAAGD,YAAY;EAE5D,OAAO,IAAAN,UAAA,CAAAgB,QAAQ,EAAC,IAAAlB,mBAAA,CAAAmB,cAAc,EAACN,eAAe,EAAEH,QAAQ,CAAC,EAAEO,YAAY,EAAEN,QAAQ,CAAC,CAACS,GAAG,CAAEC,IAAI,IAAI;IAC9F,MAAMC,WAAW,GAAG,IAAAzB,aAAA,CAAA0B,WAAW,EAACF,IAAI,EAAEJ,YAAY,EAAEL,SAAS,CAAC;IAE9D,OAAO,IAAAb,cAAA,CAAAyB,SAAS,EAACF,WAAW,EAAEb,WAAW,EAAED,YAAY,CAAC;EAC1D,CAAC,CAAC;AACJ,CAAC;AAXYiB,OAAA,CAAAtB,gBAAgB,GAAAA,gBAAA;AAatB,MAAMuB,yBAAyB,GAAGA,CAACC,KAAkB,EAAEC,OAAiB,EAAEtB,OAA4B,KAAI;EAC/G,MAAM;IAACQ,IAAI;IAAEe,kBAAkB;IAAEC;EAAU,CAAC,GAAGxB,OAAO;EACtD,MAAM;IAACC,OAAO;IAAEwB,WAAW;IAAEC;EAAiB,CAAC,GAAGL,KAAK;EAEvD;EACA,IAAIG,UAAU,CAACG,MAAM,KAAK,CAAC,EAAE;IAC3B,OAAO,EAAE;;EAGX,MAAMC,eAAe,GAAG,IAAAjC,OAAA,CAAAkC,QAAQ,EAACL,UAAU,CAACM,KAAK,CAAC7B,OAAO,CAACQ,GAAG,EAAEgB,WAAW,CAAChB,GAAG,GAAG,CAAC,CAAC,CAAC;EACpF,MAAMsB,iBAAiB,GAAGN,WAAW,CAAChB,GAAG,GAAGR,OAAO,CAACQ,GAAG;EACvD,MAAMuB,2BAA2B,GAAG,IAAArC,OAAA,CAAAsC,QAAQ,EAAChC,OAAO,CAACQ,GAAG,GAAG,CAAC,EAAEgB,WAAW,CAAChB,GAAG,CAAC,CAACyB,MAAM,CAAEC,qBAAqB,IAAI;IAC9G,OAAO,CAACZ,kBAAkB,CAACY,qBAAqB,EAAE3B,IAAI,CAACmB,MAAM,CAAC;EAChE,CAAC,CAAC,CAACA,MAAM;EAET,MAAMS,oBAAoB,GAAGR,eAAe,GAAGG,iBAAiB,GAAGC,2BAA2B;EAE9F,OAAO,IAAAxC,wBAAA,CAAA6C,iBAAiB,EAACf,OAAO,EAAEc,oBAAoB,EAAEV,iBAAiB,CAAC,CAACZ,GAAG,CAAEC,IAAI,IAAI;IACtF,IAAIA,IAAI,CAACY,MAAM,KAAK,CAAC,EAAE;MACrB,OAAO,GAAG,CAACW,MAAM,CAAC,IAAAlD,cAAA,CAAAmD,OAAW,EAACjB,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;;IAG5C,OAAOP,IAAI;EACb,CAAC,CAAC;AACJ,CAAC;AAxBYI,OAAA,CAAAC,yBAAyB,GAAAA,yBAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}